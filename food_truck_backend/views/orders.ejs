<%-
include('./includes/header.ejs')%>
</div>
<div class="col-md-12 col-lg-12" style="margin-left: 280px;">
  <div class="overflow-hidden card" data-aos="fade-up" data-aos-delay="600">
    <div class="flex-wrap card-header d-flex justify-content-between">
      <div class="header-title">
        <h4 class="mb-2 card-title">Orders</h4>
        <p class="mb-0">
          <svg class="me-2 text-primary icon-24" width="24" viewBox="0 0 24 24">
            <path
              fill="currentColor"
              d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"
            />
          </svg>
          Total Orders
        </p>
      </div>
    </div>
    <div class="p-0 card-body">
      <div class="mt-4 table-responsive">
        <table id="basic-table" class="table mb-0 table-striped" role="grid">
          <thead>
            <tr>
              <th>Customer Name</th>
              <th>Food Truck ID</th>
              <th>Price</th>
              <th>Order Items</th>
              <th>Quantity</th>
              <th>Status</th>
              <th>Order Deadline</th>
            </tr>
          </thead>
          <tbody>
            <% orders.forEach(order => { %>
            <tr>
              <td><%= order.customerName %></td>
              <td><%= order.foodTruckId %></td>
              <td><%= order.price %></td>
              <td>
                <!-- Display order items in list format -->
                <ul>
                  <% Object.entries(order.orderItem[0]).forEach(([item,
                  quantity]) => { %>
                  <li><strong><%= item %></strong></li>
                  <% }); %>
                </ul>
              </td>
              <td>
                <!-- Display quantity in a separate column -->
                <ul>
                  <% Object.entries(order.orderItem[0]).forEach(([item,
                  quantity]) => { %>
                  <li><%= quantity %></li>
                  <% }); %>
                </ul>
              </td>
              <td>
                <!-- Conditionally apply badge color based on status -->
                <% if (order.status === 'completed') { %>
                <span class="badge bg-success"><%= order.status %></span>
                <% } else { %>
                <span class="badge bg-danger"><%= order.status %></span>
                <% } %>
              </td>
              <td>
                <% if (order.orderDeadline) { %> <%= order.orderDeadline %> <% }
                %>
              </td>
            </tr>
            <% }); %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- Include Bootstrap JS and Popper.js from CDN -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<%-
include('./includes/footer.ejs')
%>
